<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width">
<!-- <link rel="alternate" type="application/atom+xml" href="http://git.example.com/?p=wiki.git;a=atom" title="wiki.example.com commits"/> -->
<title>

DVN Developer's Guide /

features /

search /

faceted
</title>

<link rel="stylesheet" href="../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../local.css" type="text/css" />





</head>
<body>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">

<a href="../../../">DVN Developer's Guide</a> / 

<a href="../../">features</a> / 

<a href="../">search</a> / 

</span>
<span class="title">
faceted

</span>
</span>

</div>

<!--

<div class="actions">
<ul>



<li><a href="FIXME">History</a></li>







</ul>
</div>

-->



</div>


<div class="sidebar">
<ul>
<li><a href="../../../build/">Build</a></li>
<li><a href="../../../deploy/">Deploy</a></li>
<li><a href="../../../commit/">Commit</a></li>
<li><a href="../../../push/">Push</a></li>
<li><a href="../../../branches/">Branches</a></li>
<li><a href="../../">Features</a></li>
<li><a href="../../../tips/">Tips</a></li>
<li><a href="../../../errors/">Errors</a></li>
<li><a href="../../../sitemap/">Sitemap</a></li>
</ul>


</div>


<div id="pagebody">

<div id="content">
<p>In <a href="https://redmine.hmdc.harvard.edu/issues/2656">https://redmine.hmdc.harvard.edu/issues/2656</a> faceted search is being added to DVN to replace non-faceted search (where appropriate, per a <a href="./roadmap/">roadmap</a>). The <a href="./status/">status</a> page summarizes the items below. Testing is taking place at <a href="http://dvn-3.hmdc.harvard.edu/dvn/">http://dvn-3.hmdc.harvard.edu/dvn/</a></p>

<div class="toc">
	<ol>
		<li class="L2"><a href="#index1h2">Network level - PARTIAL</a>
		<ol>
			<li class="L3"><a href="#index1h3">Basic search  - DONE</a>
			</li>
			<li class="L3"><a href="#index2h3">Suggested search - DONE</a>
			</li>
			<li class="L3"><a href="#index3h3">Advanced search page - PARTIAL</a>
			<ol>
				<li class="L4"><a href="#index1h4">Study Cataloging Information - PARTIAL</a>
				<ol>
					<li class="L5"><a href="#index1h5">FIXME: Some advanced searches failing on dvn-3 (i.e. author) and in production per Redmine 2931</a>
					</li>
				</ol>
				</li>
				<li class="L4"><a href="#index2h4">Tabular Data Variable Information (lower priority) - DEFERRED</a>
				</li>
				<li class="L4"><a href="#index3h4">FITS File (metadata) Information (lower priority) - DEFERRED</a>
				</li>
			</ol>
			</li>
			<li class="L3"><a href="#index4h3">New search from study listing page - DONE</a>
			</li>
			<li class="L3"><a href="#index5h3">Subsearch ("within these results" after a search) - DEFERRED</a>
			<ol>
				<li class="L4"><a href="#index4h4">FIXME: Space where facets were should be taken up by the rest of the page</a>
				</li>
				<li class="L4"><a href="#index5h4">FIXME: Text above subsearch should show all previous and current terms</a>
				</li>
			</ol>
			</li>
		</ol>
		</li>
		<li class="L2"><a href="#index2h2">Dataverse level - PARTIAL</a>
		<ol>
			<li class="L3"><a href="#index6h3">Landing page for each dataverse - DEFERRED</a>
			</li>
			<li class="L3"><a href="#index7h3">Basic search from dataverse level - PARTIAL</a>
			<ol>
				<li class="L4"><a href="#index6h4">FIXME: investigate number of hits at dataverse level</a>
				</li>
			</ol>
			</li>
			<li class="L3"><a href="#index8h3">Advanced search from dataverse level - PARTIAL</a>
			</li>
			<li class="L3"><a href="#index9h3">Subsearch ("within these results") after a search from a dataverse page - DEFERRED</a>
			</li>
			<li class="L3"><a href="#index10h3">All studies listing - DEFERRED</a>
			</li>
		</ol>
		</li>
		<li class="L2"><a href="#index3h2">Non user-facing search - DONE (nothing to do)</a>
		<ol>
			<li class="L3"><a href="#index11h3">OAI Harvesting Sets - DONE (nothing to do)</a>
			</li>
		</ol>
		</li>
	</ol>
</div>


<h2><a name="index1h2"></a>Network level - PARTIAL</h2>

<h3><a name="index1h3"></a>Basic search  - DONE</h3>

<p>User enters a query from the home page: <a href="http://dvn-3.hmdc.harvard.edu/dvn/">http://dvn-3.hmdc.harvard.edu/dvn/</a></p>

<h3><a name="index2h3"></a>Suggested search - DONE</h3>

<p>User clicks one of the suggested terms on the home page:  <a href="http://dvn-3.hmdc.harvard.edu/dvn/">http://dvn-3.hmdc.harvard.edu/dvn/</a></p>

<h3><a name="index3h3"></a>Advanced search page - PARTIAL</h3>

<p><a href="http://dvn-3.hmdc.harvard.edu/dvn/faces/AdvSearchPage.xhtml">http://dvn-3.hmdc.harvard.edu/dvn/faces/AdvSearchPage.xhtml</a></p>

<h4><a name="index1h4"></a>Study Cataloging Information - PARTIAL</h4>

<p>This is similar to basic search but you can add "contains" or "does not contain" for various fields at once:</p>

<ul>
<li>Title</li>
<li>Producer</li>
<li>Production Date</li>
<li>Time Period Covered Start</li>
</ul>


<h5><a name="index1h5"></a>FIXME: Some advanced searches failing on dvn-3 (i.e. author) and in production per Redmine 2931</h5>

<p>No results for searches on author at <a href="http://dvn-3.hmdc.harvard.edu/dvn/faces/AdvSearchPage.xhtml">http://dvn-3.hmdc.harvard.edu/dvn/faces/AdvSearchPage.xhtml</a> (seeing author rather than authorName and keyword rather than keywordValue). We are also seeing this in production at <a href="http://thedata.harvard.edu/dvn/dv/mra">http://thedata.harvard.edu/dvn/dv/mra</a> as reported at <a href="https://redmine.hmdc.harvard.edu/issues/2931">https://redmine.hmdc.harvard.edu/issues/2931</a> where a fix (a hack for now) is proposed.</p>

<p>Combinations such as <code>+(+title:data +productionDate:1997)</code> seem to work fine.</p>

<h4><a name="index2h4"></a>Tabular Data Variable Information (lower priority) - DEFERRED</h4>

<p>This search looks into the variables of uploaded files (tab-separated, Stata, SPSS, etc.).</p>

<p>We decided to defer on adding facets to variable search, at least for now.</p>

<h4><a name="index3h4"></a>FITS File (metadata) Information (lower priority) - DEFERRED</h4>

<p>Please note that you only see the option to search FITS files if any FITS files have been uploaded.</p>

<p>We decided to defer on adding facets to FITS/metadata search, at least for now.</p>

<h3><a name="index4h3"></a>New search from study listing page - DONE</h3>

<p>A fast way to get to the study listing page is by clicking a suggested term from the homepage: <a href="http://dvn-3.hmdc.harvard.edu/dvn/">http://dvn-3.hmdc.harvard.edu/dvn/</a></p>

<h3><a name="index5h3"></a>Subsearch ("within these results" after a search) - DEFERRED</h3>

<p>You are given the option to check this box after search from the home page or the advanced search page.</p>

<h4><a name="index4h4"></a>FIXME: Space where facets were should be taken up by the rest of the page</h4>

<h4><a name="index5h4"></a>FIXME: Text above subsearch should show all previous and current terms</h4>

<h2><a name="index2h2"></a>Dataverse level - PARTIAL</h2>

<h3><a name="index6h3"></a>Landing page for each dataverse - DEFERRED</h3>

<p><a href="http://dvn-3.hmdc.harvard.edu/dvn/dv/mra">http://dvn-3.hmdc.harvard.edu/dvn/dv/mra</a> (for example).  From the landing page for a dataverse, the number of studies shown corresponds to that dataverse. That is, a search is performed.  Should we show faceted search results here? This is similar in concept to showing faceted results on the "all studies listing" page.</p>

<p>We decided to defer on adding facets to dataverse landing pages, at least for now.</p>

<h3><a name="index7h3"></a>Basic search from dataverse level - PARTIAL</h3>

<p><a href="http://dvn-3.hmdc.harvard.edu/dvn/dv/mra">http://dvn-3.hmdc.harvard.edu/dvn/dv/mra</a> (for example).  From the landing page for a dataverse, searches are automatically narrowed to be within that dataverse (seemingly whether or not "within this collection" is checked) unless the dataverse has collections that contain studies from other dataverses.</p>

<p>To perform a basic search within a collection, you can click the name of the collection from the landing page of the dataverse. For example, this is the "Heath" collection from MRA (by clicking "Health" on the MRA landing page)</p>

<p><a href="http://dvn-3.hmdc.harvard.edu/dvn/dv/mra/faces/StudyListingPage.xhtml?mode=1&amp;collectionId=6">http://dvn-3.hmdc.harvard.edu/dvn/dv/mra/faces/StudyListingPage.xhtml?mode=1&amp;collectionId=6</a></p>

<h4><a name="index6h4"></a>FIXME: investigate number of hits at dataverse level</h4>

<p>As of <a href="https://github.com/IQSS/dvn/commit/0507f48">https://github.com/IQSS/dvn/commit/0507f48</a> a search for "data" at <a href="http://dvn-3.hmdc.harvard.edu/dvn/dv/mra">http://dvn-3.hmdc.harvard.edu/dvn/dv/mra</a> yields...</p>

<ul>
<li>438 studies before search</li>
<li>442 studies nothing checked (additional studies?)</li>
<li>432 studies if "within this collection" is checked</li>
</ul>


<p>... whereas at <a href="http://thedata.harvard.edu/dvn/dv/mra">http://thedata.harvard.edu/dvn/dv/mra</a> (3.4) the numbers are:</p>

<ul>
<li>437 studies before search</li>
<li>431 studies nothing checked</li>
<li>431 studies if "within this collection" is checked</li>
</ul>


<h3><a name="index8h3"></a>Advanced search from dataverse level - PARTIAL</h3>

<p>As with basic search, for now we only show faceted results from the dataverse level when the dataverse doesn't have any collections.</p>

<p>Please note that from the advanced search page at the dataverse level, you can select particular collections with the radio button under "Collection Scope". For example, you can select the "Health" collection from MRA here:</p>

<p><a href="http://dvn-3.hmdc.harvard.edu/dvn/dv/mra/faces/AdvSearchPage.xhtml">http://dvn-3.hmdc.harvard.edu/dvn/dv/mra/faces/AdvSearchPage.xhtml</a></p>

<h3><a name="index9h3"></a>Subsearch ("within these results") after a search from a dataverse page - DEFERRED</h3>

<p>This will probably be solved when the main "within these results" area is refactored.</p>

<h3><a name="index10h3"></a>All studies listing - DEFERRED</h3>

<p>From the home page you can click "view more" to see a list of all studies at <a href="http://dvn-3.hmdc.harvard.edu/dvn/faces/StudyListingPage.xhtml?mode=100">http://dvn-3.hmdc.harvard.edu/dvn/faces/StudyListingPage.xhtml?mode=100</a> and we probably want to have facets there.</p>

<p>Code to do a MatchAllDocsQuery has been added but commented out and is not well tested and may need a re-write. For now we have decide to defer adding facets to the all studies listing page.</p>

<h2><a name="index3h2"></a>Non user-facing search - DONE (nothing to do)</h2>

<p>This simply a list of other places Lucene is used in the application but where it doesn't make sense to expose faceted results to the users. Functionality should still be tested, however, to make no regressions have been introduced.</p>

<h3><a name="index11h3"></a>OAI Harvesting Sets - DONE (nothing to do)</h3>

<p>OAI harvesting is configured at the DVN level: <a href="http://guides.thedata.org/book/manage-oai-harvesting-sets">http://guides.thedata.org/book/manage-oai-harvesting-sets</a></p>

<p>Facets results have not been added as they are not necessary (only a simple list of IDs ir required) but we should ensure that changes have not broken the search used by OAI harvesting sets.</p>

</div>





</div>

<div id="footer" class="pagefooter">

<div id="pageinfo">




<div id="backlinks">
Links:

<a href="../">search</a>


</div>






<div class="pagedate">
Last <a href="FIXME">updated</a> <span class="date">Mon May 13 16:08:32 2013</span>
<!-- Created <span class="date">Mon Apr  8 14:20:01 2013</span> -->
</div>

</div>


<!-- from DVN Developer's Guide -->
</div>

</div>

<hr>

<div>
DVN Dev Team
</div>

</body>
</html>
